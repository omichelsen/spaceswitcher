(function(e,t,n){"use strict";function s(t,n){this.element=t;this.options=e.extend({},i,n);this._defaults=i;this._name=r;this.init()}var r="spaceswitcher",i={data:[]};s.prototype.init=function(){var n=this;e(this.element).append(n.template(n.options.data)).find(".search-input").keyup(function(){var t=n.unquote(e(this).val());e(".spaceswitcher .group",n.element).children().show().removeSearch().search(t).filter(".item").not(".match").hide().end().removeHighlight().highlight(t).end().end().show().not(function(){return e(this).children().hasClass("match")}).hide()}).end().find(".header:first").addClass("selected");e("body").keydown(function(e){switch(e.which){case 13:t.location=n.selected().attr("href");e.preventDefault();break;case 38:n.navigate("↑");e.preventDefault();break;case 40:n.navigate("↓");e.preventDefault()}})};s.prototype.destroy=function(){e(this.element).off("."+this._name).remove(".spaceswitcher");e.removeData(this.element,"plugin_"+this._name)};s.prototype.selected=function(){return e(".spaceswitcher .selected")};s.prototype.switchSelected=function(e,t){t.removeClass("selected");e.addClass("selected")};s.prototype.navigate=function(e){var t=e==="↓"?0:-1,n=this.selected(),r=n.index()+t,i=n.siblings(":visible").eq(r);if(r>=0&&i.length)this.switchSelected(i,n);else{i=n.parent().siblings(":visible").eq(n.parent().index()+t).children(":visible").eq(t);i.length&&this.switchSelected(i,n)}};s.prototype.template=function(e){var t='<div class="spaceswitcher"><div class="search"><input type="search" class="search-input" /></div><div class="results">'+this.templateResults(e)+"</div>"+"</div>";return t};s.prototype.templateResults=function(t){var n="";e.each(t,function(){n+='<div class="group"><a class="header" href="https://podio.com">'+this.name+"</a>";e.each(this.spaces,function(){n+='<a class="item" href="'+this.url+'">'+this.name+"</a>"});n+="</div>"});return n};s.prototype.unquote=function(e){return e.replace(/['"]/g,"")};e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new s(this,t))})}})(jQuery,window);