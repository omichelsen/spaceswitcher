/**
 * Checks whether a given object is a function. Borrowed from Underscore.js.
 */function unquote(e){return e.replace(/['"]/,"")}function getData(e){$.getJSON("data/spaces.json",function(t){renderResults(t);isFunction(e)&&e(t)})}function renderResults(e){var t="";$.each(e,function(e,n){t+='<div class="group"><div class="header">'+n.name+"</div>";$.each(n.spaces,function(e,n){t+='<div class="item">'+n.name+"</div>"});t+="</div>"});$(".results").html(t)}function clearSelected(){$(".spaceswitcher .results div.selected").removeClass("selected")}function getFirst(){return $(".spaceswitcher .group div").first()}function navUp(){clearSelected();navItemSelected?navItemSelected.prev().addClass("selected"):navItemSelected=getFirst()}function navDown(){clearSelected();navItemSelected?navItemSelected.next().addClass("selected"):navItemSelected=getFirst()}var isFunction=function(e){return!!(e&&e.constructor&&e.call&&e.apply)};$(".search-input").keyup(function(){var e=unquote($(this).val());console.log("keyup",e);getData(function(){$(".spaceswitcher .group").children().removeSearch().search(e).filter(".item").not(".match").hide().end().removeHighlight().highlight(e).end().end().show().not(function(){return $(this).children().hasClass("match")}).hide()})});var navItemSelected=null;$("body").keydown(function(e){switch(e.which){case 38:console.log("up");navUp();break;case 40:console.log("down");navDown()}});(function(e,t,n){"use strict";function s(t,n){this.element=t;this.options=e.extend({},i,n);this._defaults=i;this._name=r;this.init()}var r="spaceswitcher",i={data:[],dataUrl:"data/spaces.json"};s.prototype.init=function(){var t=this;e(this.element).on("submit."+t._name,function(){var e=t.getInput(),n=t.validate(e);n?t.options.success(t,e):t.options.fail(t,e);return!1}).find(".puzzle").html(t.createTable(t.options.patternsX,t.options.patternsY)).find("input[type=text]").on("keyup."+t._name+" change."+t._name,function(){e(this).toggleClass("space",e(this).val()===" ")}).on("focus."+t._name,function(){e(this).addClass("focus")}).on("blur."+t._name,function(){e(this).removeClass("focus")}).end().formNavigation()};s.prototype.destroy=function(){e(this.element).off("."+this._name).find(".puzzle").empty();e.removeData(this.element,"plugin_"+this._name)};s.prototype.createWidget=function(){var t=this,n=e("<table><thead><tr><th/></tr></thead><tbody/><tfoot><tr><th/></tr></tfoot></table>");e.each(patternsX,function(){e("thead tr",n).append("<th><div><span>"+t.escapeHTML(this[0])+"</span></div></th>");this.length>1&&e("tfoot tr",n).append("<th><div><span>"+t.escapeHTML(this[1])+"</span></div></th>")});e.each(patternsY,function(r){var i=e("<tr><th><span>"+t.escapeHTML(this[0])+"</span></th></tr>");for(var s=0;s<patternsX.length;s++)i.append('<td><input type="text" name="'+String.fromCharCode(65+s)+(r+1)+'" autocomplete="off" maxlength="1" required/></td>');this.length>1&&i.append("<th><span>"+t.escapeHTML(this[1])+"</span></th>");e("tbody",n).append(i)});return n};s.prototype.getInput=function(){var t=[];e("tbody tr",this.element).each(function(n,r){t[n]="";e("td input",r).each(function(e,r){t[n]+=(r.value||" ").toUpperCase()})});return t};s.prototype.setInput=function(t){e("tbody tr",this.element).each(function(n,r){e("input",r).each(function(r,i){t[n]&&t[n][r]!==" "&&e(i).val(t[n][r]).change()})})};s.prototype.validate=function(e){};s.prototype.validateAgainstMultiple=function(e,t){};s.prototype.escapeHTML=function(){var e={'"':"&quot;","&":"&amp;","'":"&#39;","/":"&#47;","<":"&lt;",">":"&gt;"};return function(t){return t.replace(/[\"&'\/<>]/g,function(t){return e[t]})}}();e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new s(this,t))})}})(jQuery,window);